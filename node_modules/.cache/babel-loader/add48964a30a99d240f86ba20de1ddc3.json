{"ast":null,"code":"var _jsxFileName = \"/Users/andresgonzalez/Documents/mixtis/Parcial2web/src/Components/Charts.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TitleLenguage() {\n  let lenguage = navigator.language || navigator.userLanguage;\n\n  if (lenguage.startsWith(\"es\")) {\n    return \"Uso de poder (KwH) - Hoy\";\n  } else if (lenguage.startsWith(\"en\")) {\n    return \"Power usage (KwH) - Today\";\n  } else {\n    return \"Power usage (KwH) - Today\";\n  }\n}\n\n_c = TitleLenguage;\n\nfunction Charts(props) {\n  _s();\n\n  const Charts = useRef(null);\n  const [rooms, setRooms] = useState([]);\n  useEffect(() => {\n    setRooms(props.rooms);\n    const iWidth = 300;\n    const iHeight = 300;\n    const radius = 100; // Define size and pos of svg\n\n    const svg = d3.select(Charts.current).attr(\"width\", iWidth).attr(\"height\", iHeight).append(\"g\").attr(\"transform\", `translate(${iWidth / 2}, ${iHeight / 2})`);\n    svg.append(\"text\").attr(\"x\", 0).attr(\"y\", -radius - 20).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"16px\").style(\"text-decoration\", \"underline\").text(TitleLenguage()); // get positions base on each data object\n\n    const pieData = d3.pie().value(d => d.powerUsage.value)(rooms);\n    console.log(\"pieData\", pieData); // Define arcs for graph and label\n\n    const arc = d3.arc().innerRadius(0).outerRadius(radius);\n    const colors = d3.scaleOrdinal().range(d3.schemeCategory10); // Add tooltip\n\n    const tooldiv = d3.select(\"#chartD3\").append(\"div\").style(\"visibility\", \"hidden\").style(\"position\", \"absolute\").style(\"background-color\", \"white\"); // Draw piechart\n\n    svg.append(\"g\").selectAll(\"path\").data(pieData).join(\"path\").attr(\"d\", arc).attr(\"fill\", (d, i) => colors(i)).attr(\"stroke\", \"white\").on(\"mousemove\", function (e) {\n      tooldiv.style(\"top\", e.pageY - 30 + \"px\").style(\"left\", e.pageX - 50 + \"px\");\n    }).on(\"mouseover\", (e, d) => {\n      tooldiv.style(\"visibility\", \"visible\").text(`${d.data.name}: ${d.data.powerUsage.value} ${d.data.powerUsage.unit}`);\n    }).on(\"mouseout\", () => {\n      tooldiv.style(\"visibility\", \"hidden\");\n    });\n  }, [props.rooms, rooms]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"roomTitle\",\n      style: {\n        textAlign: \"left\",\n        marginLeft: \"2rem\"\n      },\n      children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n        id: \"charts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"chartD3\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: Charts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Charts, \"rq0qiAX/rI3DtF9dkKA2JIRnCis=\");\n\n_c2 = Charts;\nexport default Charts;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TitleLenguage\");\n$RefreshReg$(_c2, \"Charts\");","map":{"version":3,"sources":["/Users/andresgonzalez/Documents/mixtis/Parcial2web/src/Components/Charts.js"],"names":["React","useEffect","useRef","useState","FormattedMessage","d3","TitleLenguage","lenguage","navigator","language","userLanguage","startsWith","Charts","props","rooms","setRooms","iWidth","iHeight","radius","svg","select","current","attr","append","style","text","pieData","pie","value","d","powerUsage","console","log","arc","innerRadius","outerRadius","colors","scaleOrdinal","range","schemeCategory10","tooldiv","selectAll","data","join","i","on","e","pageY","pageX","name","unit","textAlign","marginLeft"],"mappings":"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","sourcesContent":["\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport * as d3 from \"d3\";\n\nfunction TitleLenguage() {\n  let lenguage = navigator.language || navigator.userLanguage;\n  if (lenguage.startsWith(\"es\")) {\n    return \"Uso de poder (KwH) - Hoy\";\n  } else if (lenguage.startsWith(\"en\")) {\n    return \"Power usage (KwH) - Today\";\n  } else {\n    return \"Power usage (KwH) - Today\";\n  }\n}\n\nfunction Charts(props) {\n  const Charts = useRef(null);\n\n  const [rooms, setRooms] = useState([]);\n\n  useEffect(() => {\n    setRooms(props.rooms);\n    const iWidth = 300;\n    const iHeight = 300;\n    const radius = 100;\n\n    // Define size and pos of svg\n    const svg = d3\n      .select(Charts.current)\n      .attr(\"width\", iWidth)\n      .attr(\"height\", iHeight)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${iWidth / 2}, ${iHeight / 2})`);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"y\", -radius - 20)\n      .attr(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"16px\")\n      .style(\"text-decoration\", \"underline\")\n      .text(TitleLenguage());\n    // get positions base on each data object\n    const pieData = d3.pie().value((d) => d.powerUsage.value)(rooms);\n    console.log(\"pieData\", pieData);\n\n    // Define arcs for graph and label\n\n    const arc = d3.arc().innerRadius(0).outerRadius(radius);\n\n    const colors = d3.scaleOrdinal().range(d3.schemeCategory10);\n\n    // Add tooltip\n    const tooldiv = d3\n      .select(\"#chartD3\")\n      .append(\"div\")\n      .style(\"visibility\", \"hidden\")\n      .style(\"position\", \"absolute\")\n      .style(\"background-color\", \"white\");\n\n    // Draw piechart\n    svg\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(pieData)\n      .join(\"path\")\n      .attr(\"d\", arc)\n      .attr(\"fill\", (d, i) => colors(i))\n      .attr(\"stroke\", \"white\")\n      .on(\"mousemove\", function (e) {\n        tooldiv\n          .style(\"top\", e.pageY - 30 + \"px\")\n          .style(\"left\", e.pageX - 50 + \"px\");\n      })\n      .on(\"mouseover\", (e, d) => {\n        tooldiv\n          .style(\"visibility\", \"visible\")\n          .text(\n            `${d.data.name}: ${d.data.powerUsage.value} ${d.data.powerUsage.unit}`\n          );\n      })\n      .on(\"mouseout\", () => {\n        tooldiv.style(\"visibility\", \"hidden\");\n      });\n  }, [props.rooms, rooms]);\n\n  return (\n    <div>\n      <h2\n        className=\"roomTitle\"\n        style={{ textAlign: \"left\", marginLeft: \"2rem\" }}\n      >\n        <FormattedMessage id=\"charts\" />\n      </h2>\n      <div id=\"chartD3\">\n        <svg ref={Charts}></svg>\n      </div>\n    </div>\n  );\n}\n\nexport default Charts;"]},"metadata":{},"sourceType":"module"}